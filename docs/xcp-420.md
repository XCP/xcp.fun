# 🌿 XCP-420 Standard

XCP-420 is a community-driven fair launch standard for Counterparty fairminters.

Fairminters can be configured in countless ways, but XCP-420 defines a clear, familiar setup that the community can rally around. The goal is simple: make meme-coin launches safe, fair, and repeatable while keeping everything on-chain and trustless.

## ✨ Why It's Valuable

- **Familiarity** → Every mint follows the same parameters, so backers know exactly what they're getting
- **Fairness** → No premine, no creator rake, no hidden edge cases
- **Safety** → Refunds and burns are enforced directly by the Counterparty protocol
- **Meme-ability** → Anchored to the legendary 420
- **Distribution** → Anti-whale limits ensure many participants share supply

## 📊 Core Parameters

- **Supply:** 10M tokens (hard cap)
- **Soft Cap:** 4.2M tokens (42% of supply)
- **Mint Cost:** 0.1 XCP per mint
- **Tokens per Mint:** 1,000
- **Per-Address Limit:** Max 35 mints (35,000 tokens = 0.35% of supply)
- **Duration:** 1,000 blocks (~7 days)
- **Supply Lock:** Fixed at creation, no inflation possible

## 🔄 Lifecycle of a XCP-420 Mint

1. **Rolled Up** → Scheduled to begin at start_block
2. **Lit** → Minting open for 1,000 blocks (~1 week)
3. **Burned** → If at least 4.2M tokens minted, all contributed XCP is burned, tokens distributed
4. **Ashed** → If fewer than 4.2M tokens minted, all XCP is automatically refunded (BTC miner fees excluded)

💡 **Average result:** ~285 addresses burn 1,000 XCP total to share 10M tokens.

📝 **Note:** Lowering max_mint_per_address raises the ceiling for the number of addresses that may participate.

## 🛡️ Key Features

- **Fair Launch:** Creator starts with zero tokens
- **Automatic Refunds:** Soft cap not met = XCP auto-returned
- **Hard Burn:** Contributed XCP is provably destroyed
- **Anti-Whale:** Max 0.35% of supply per address
- **Timed Window:** 1,000 blocks creates urgency but avoids FOMO grind
- **Trustless:** 100% enforced by the Counterparty protocol

## 🎯 Compliance Modes

### Why Strict vs Loose?

The distinction exists for practical reasons without subverting the spec's intent:

1. **Per-address limits**: The protocol enforces this, but the Compose API doesn't expose the parameter yet. Since users can always create multiple addresses anyway, missing this limit doesn't break the fairness principle—it just makes it less convenient to enforce.

2. **Soft cap deadline flexibility**: Whether a mint fails to reach soft cap 100 blocks or 1 block before the end has the same outcome—XCP gets refunded. The flexibility accommodates real-world usage without harm.

Both modes maintain the core XCP-420 principles of fairness, transparency, and automatic refunds.

### ✅ Strict Mode (future-ready; not enforceable today)

When the API supports it, **Strict XCP-420** will require:
- `max_mint_per_address` **present** and **≤ 35,000 tokens**
- `max_mint_per_tx` **present** and **equal to** `max_mint_per_address`
- All core parameters below

### ⚠️ Loose Mode (what we can verify today)

Since the API can't confirm `max_mint_per_address`, a mint is **XCP-420 Loose** if it meets **all** core parameters **and** has relaxed requirements for:

**Per-address limits** (any of these):
- `max_mint_per_address` **absent** (0 or not set)
- `max_mint_per_tx` **absent** (0 or not set)
- Both present but **not equal**
- Either present and **> 35,000 tokens**

**Soft cap deadline**:
- Must be **less than** `end_block` (API requirement)
- Can be **within 100 blocks** of `end_block` for Loose mode
- Must be **exactly** `end_block - 1` for Strict mode

## 📐 Core Parameters

Both Strict and Loose modes require these values:

| Parameter | Value | Notes |
|-----------|-------|-------|
| `hard_cap` | 10,000,000 tokens | Max supply |
| `soft_cap` | 4,200,000 tokens | 42% minimum |
| `price` | 0.1 XCP | Cost per mint |
| `quantity_by_price` | 1,000 tokens | Tokens per mint |
| `start_block` | Future block number | When minting starts |
| `end_block` | start_block + 1000 | Exactly 1000 blocks duration |
| `soft_cap_deadline_block` | See notes below | When soft cap must be reached |
| `burn_payment` | true | Burn XCP, don't send to issuer |
| `lock_quantity` | true | Supply locked |
| `divisible` | true | 8 decimal places |
| `premint_quantity` | 0 | No premine |
| `minted_asset_commission` | 0 | No rake |

**Additional requirements for Strict mode only:**
| Parameter | Value | Notes |
|-----------|-------|-------|
| `max_mint_per_address` | ≤35,000 tokens | Must be >0 |
| `max_mint_per_tx` | Same as max_mint_per_address | Single-tx max |

**Block Calculation Example:**
- If current block = 989,500
- Set `start_block` = 990,000 (future block)
- Set `end_block` = 1,000,000 (start + 1000)
- Set `soft_cap_deadline_block` = 999,999 (end - 1)
- Duration = 1,000,000 - 990,000 = **exactly 1,000 blocks**

## Compose API

XCP-420 tokens are divisible (8 decimal places), so quantities must be converted to integers for the API.

### Integer Conversion Table

| Parameter | Human Value | API Integer Value |
|-----------|------------|-------------------|
| `hard_cap` | 10,000,000 tokens | 1000000000000000 |
| `soft_cap` | 4,200,000 tokens | 420000000000000 |
| `price` | 0.1 XCP | 10000000 |
| `quantity_by_price` | 1,000 tokens | 100000000000 |
| `max_mint_per_tx` | 35,000 tokens | 3500000000000 |
| `max_mint_per_address` | 35,000 tokens | 3500000000000 |

### Important Notes

⚠️ **Soft Cap Deadline Block**:
- **API Requirement**: Must be **less than** `end_block` (not equal)
- **Strict Mode**: Must be **exactly** `end_block - 1` (e.g., 999999 if end_block is 1000000)
- **Loose Mode**: Can be **within 100 blocks** of `end_block` (e.g., 999900-999999 if end_block is 1000000)
- **Recommendation**: Always use `end_block - 1` for maximum compatibility

Example:
- If `start_block = 990000`
- And `end_block = 1000000` (start + 1000)
- **Strict**: `soft_cap_deadline_block = 999999` (exactly end - 1)
- **Loose**: `soft_cap_deadline_block = 999900 to 999999` (within 100 blocks of end)

⚠️ **max_mint_per_address**: This parameter was added in Counterparty Core v11.0.0. APIs running older versions will not recognize this parameter and will default it to 0, making the fairminter only Loose compliant at best.

### Example Request

```bash
curl "https://api.counterparty.io:4000/v2/addresses/YOUR_ADDRESS/compose/fairminter?\
asset=MYTOKEN&\
price=10000000&\
quantity_by_price=100000000000&\
max_mint_per_tx=3500000000000&\
max_mint_per_address=3500000000000&\
hard_cap=1000000000000000&\
soft_cap=420000000000000&\
start_block=990000&\
end_block=1000000&\
soft_cap_deadline_block=999999&\
burn_payment=true&\
lock_quantity=true&\
divisible=true&\
premint_quantity=0&\
minted_asset_commission=0&\
mime_type=&\
description=XCP-420%20compliant%20fair%20launch"
```

The API returns a hex-encoded transaction that can be signed and broadcast to create the fairminter.

## Verification

To verify XCP-420 compliance, check these raw integer values:

```javascript
// Check core parameters (required for both Strict and Loose)
const coreCompliant = (
  fairminter.hard_cap === 1000000000000000 &&         // 10M tokens with 8 decimals
  fairminter.soft_cap === 420000000000000 &&          // 4.2M tokens with 8 decimals
  fairminter.price === 10000000 &&                    // 0.1 XCP in satoshis
  fairminter.quantity_by_price === 100000000000 &&    // 1000 tokens with 8 decimals
  fairminter.end_block - fairminter.start_block === 1000 &&
  fairminter.soft_cap_deadline_block === fairminter.end_block - 1 &&
  fairminter.burn_payment === true &&
  fairminter.lock_quantity === true &&
  fairminter.divisible === true &&
  fairminter.premint_quantity === 0 &&
  fairminter.minted_asset_commission === 0
);

// Check strict requirements (when API supports it)
const strictCompliant = coreCompliant && (
  fairminter.max_mint_per_address > 0 &&
  fairminter.max_mint_per_address <= 3500000000000 &&  // Max 35k tokens
  fairminter.max_mint_per_tx === fairminter.max_mint_per_address
);

// Today: can only verify loose compliance
const looseCompliant = coreCompliant;  // Per-address limits not verifiable via API
```

📝 **Implementation example:** See our [xcp420.ts utility](https://github.com/XCP/xcp.fun/blob/master/lib/xcp420.ts) and [test fixtures](https://github.com/XCP/xcp.fun/blob/master/lib/xcp420.test.ts) for a complete implementation.

## Known Limitations

- Setting a mint limit per address doesn't prevent someone from having more than one address
- 10M supply or 1000 XCP burned may not be the sweet spot for parameters
- Changes in price of XCP may impact the risk-level associated

---

🔗 See also: [🍆 XCP-69 Standard (Draft)](./xcp-69.md) - Higher-commitment launches with pooled liquidity

